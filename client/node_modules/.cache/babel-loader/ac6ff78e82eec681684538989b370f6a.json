{"ast":null,"code":"import _classCallCheck from \"/Users/mike/Git/spg-movie-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mike/Git/spg-movie-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n// decode a token and get the user's information out of it\nimport decode from 'jwt-decode';\n\n// class to instantiate for a user\nvar AuthService = /*#__PURE__*/function () {\n  function AuthService() {\n    _classCallCheck(this, AuthService);\n  }\n  _createClass(AuthService, [{\n    key: \"getProfile\",\n    // get user data\n    value: function getProfile() {\n      return decode(this.getToken());\n    } // check if user's logged in\n  }, {\n    key: \"loggedIn\",\n    value: function loggedIn() {\n      // Checks if there is a saved token and it's still valid\n      var token = this.getToken();\n      return !!token && !this.isTokenExpired(token);\n    } // check if token is expired\n  }, {\n    key: \"isTokenExpired\",\n    value: function isTokenExpired(token) {\n      try {\n        var decoded = decode(token);\n        if (decoded.exp < Date.now() / 1000) {\n          return true;\n        } else return false;\n      } catch (err) {\n        return false;\n      }\n    }\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      // Retrieves the user token from localStorage\n      return localStorage.getItem('id_token');\n    }\n  }, {\n    key: \"login\",\n    value: function login(idToken) {\n      // Saves user token to localStorage\n      localStorage.setItem('id_token', idToken);\n      window.location.assign('/');\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      // Clear user token and profile data from localStorage\n      localStorage.removeItem('id_token');\n      // this will reload the page and reset the state of the application\n      window.location.assign('/');\n    }\n  }]);\n  return AuthService;\n}();\nexport default new AuthService();","map":{"version":3,"names":["decode","AuthService","getToken","token","isTokenExpired","decoded","exp","Date","now","err","localStorage","getItem","idToken","setItem","window","location","assign","removeItem"],"sources":["/Users/mike/Git/spg-movie-app/client/src/utils/auth.js"],"sourcesContent":["// decode a token and get the user's information out of it\nimport decode from 'jwt-decode';\n\n// class to instantiate for a user\nclass AuthService {\n  // get user data\n  getProfile() {\n    return decode(this.getToken());\n  }\n\n  // check if user's logged in\n  loggedIn() {\n    // Checks if there is a saved token and it's still valid\n    const token = this.getToken();\n    return !!token && !this.isTokenExpired(token); \n  }\n\n  // check if token is expired\n  isTokenExpired(token) {\n    try {\n      const decoded = decode(token);\n      if (decoded.exp < Date.now() / 1000) {\n        return true;\n      } else return false;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  getToken() {\n    // Retrieves the user token from localStorage\n    return localStorage.getItem('id_token');\n  }\n\n  login(idToken) {\n    // Saves user token to localStorage\n    localStorage.setItem('id_token', idToken);\n    window.location.assign('/');\n  }\n\n  logout() {\n    // Clear user token and profile data from localStorage\n    localStorage.removeItem('id_token');\n    // this will reload the page and reset the state of the application\n    window.location.assign('/');\n  }\n}\n\nexport default new AuthService();\n"],"mappings":";;AAAA;AACA,OAAOA,MAAM,MAAM,YAAY;;AAE/B;AAAA,IACMC,WAAW;EAAA;IAAA;EAAA;EAAA;IAAA;IACf;IAAA,6BACa;MACX,OAAOD,MAAM,CAAC,IAAI,CAACE,QAAQ,EAAE,CAAC;IAChC,CAAC,CAED;EAAA;IAAA;IAAA,2BACW;MACT;MACA,IAAMC,KAAK,GAAG,IAAI,CAACD,QAAQ,EAAE;MAC7B,OAAO,CAAC,CAACC,KAAK,IAAI,CAAC,IAAI,CAACC,cAAc,CAACD,KAAK,CAAC;IAC/C,CAAC,CAED;EAAA;IAAA;IAAA,+BACeA,KAAK,EAAE;MACpB,IAAI;QACF,IAAME,OAAO,GAAGL,MAAM,CAACG,KAAK,CAAC;QAC7B,IAAIE,OAAO,CAACC,GAAG,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAE;UACnC,OAAO,IAAI;QACb,CAAC,MAAM,OAAO,KAAK;MACrB,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ,OAAO,KAAK;MACd;IACF;EAAC;IAAA;IAAA,2BAEU;MACT;MACA,OAAOC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IACzC;EAAC;IAAA;IAAA,sBAEKC,OAAO,EAAE;MACb;MACAF,YAAY,CAACG,OAAO,CAAC,UAAU,EAAED,OAAO,CAAC;MACzCE,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,GAAG,CAAC;IAC7B;EAAC;IAAA;IAAA,yBAEQ;MACP;MACAN,YAAY,CAACO,UAAU,CAAC,UAAU,CAAC;MACnC;MACAH,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,GAAG,CAAC;IAC7B;EAAC;EAAA;AAAA;AAGH,eAAe,IAAIf,WAAW,EAAE"},"metadata":{},"sourceType":"module"}